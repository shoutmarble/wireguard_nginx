networks:
  npm_net:
    external: true

services:
  livekit:
    image: livekit/livekit-server:latest

    container_name: live
    hostname: live

    command: --config /etc/livekit.yaml

    restart: unless-stopped

    networks:
      npm_net:
        ipv4_address: 10.10.30.30
        ipv6_address: fd12:3456:789a::30:30

    volumes:
      - ./livekit.yaml:/etc/livekit.yaml
      - ./ACME_LEGO/certificates/:/opt/certs

    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--spider", "http://localhost:7880/"]
      interval: 10s
      timeout: 10s
      retries: 5
      start_period: 10s
    

